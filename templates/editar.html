{% extends "base.html" %}
{% block content %}
<div class="row g-4">
  <div class="col-lg-8 mx-auto">
    <div class="card shadow-lg" style="border-radius: 24px;">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-3">
          <h5 class="card-title mb-0 d-flex align-items-center gap-2">
            <i class="fas fa-edit text-primary" style="font-size: 1.4rem;"></i>
            <span>Editar ligação #{{ ligacao.id }}</span>
          </h5>
          <span class="badge rounded-pill px-3 py-2" style="background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);">
            <i class="fas fa-user me-1"></i>{{ current_user_fullname }}
          </span>
        </div>
        <form method="post" action="/editar/{{ ligacao.id }}" class="vstack gap-3">
          <div>
            <label class="form-label fw-semibold d-flex align-items-center gap-2">
              <i class="fas fa-id-card text-primary"></i>
              CRO
            </label>
            <input type="text" name="cro" class="form-control" value="{{ ligacao.cro }}" required>
          </div>
          <div>
            <label class="form-label fw-semibold d-flex align-items-center gap-2">
              <i class="fas fa-user-circle text-success"></i>
              Nome do Inscrito
            </label>
            <input type="text" name="nome_inscrito" class="form-control" value="{{ ligacao.nome_inscrito }}" required>
          </div>
          <div>
            <label class="form-label fw-semibold d-flex align-items-center gap-2">
              <i class="fas fa-question-circle" style="color: #9B59B6;"></i>
              Dúvida
            </label>
            <select name="duvida" class="form-select" required>
              {% for opt in duvida_opcoes %}
              <option value="{{ opt }}" {% if opt == ligacao.duvida %}selected{% endif %}>{{ opt }}</option>
              {% endfor %}
            </select>
          </div>
          <div>
            <label class="form-label fw-semibold d-flex align-items-center gap-2">
              <i class="fas fa-comment-dots text-secondary"></i>
              Observação
            </label>
            <textarea name="observacao" class="form-control" rows="4" style="resize: vertical;">{{ ligacao.observacao or '' }}</textarea>
          </div>

          <div class="d-flex gap-3 flex-wrap mt-2">
            <button type="submit" class="btn btn-primary flex-grow-1 shadow-hover" style="min-width: 180px;">
              <i class="fas fa-save me-2"></i>Salvar alterações
            </button>
            <a href="/" class="btn btn-outline-secondary flex-grow-1 shadow-hover" style="min-width: 140px;">
              <i class="fas fa-times me-2"></i>Cancelar
            </a>
          </div>

          <div class="alert alert-info mb-0 d-flex align-items-start gap-2 mt-2">
            <i class="fas fa-info-circle mt-1" style="color: #4A90E2;"></i>
            <div>
              <strong>Criada em:</strong> {{ format_sp(ligacao.created_at) }}
              {% if ligacao.atendente %}
              <br><strong>Atendente:</strong> {{ ligacao.atendente }}
              {% endif %}
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
